<label class="columns is-centered has-icons-right">
    <h2 class="column has-text-weight-bold text-uppercase has-text-white" style="background: #dd0000">
        <figure class="has-background-black-bis" style="padding: 10px; margin-bottom: 0">
            <img src="{{ asset('build/images/beatstars.9a4fbdae.png') }}" alt="" style="max-height: 50px">
        </figure>
    </h2>
</label>

{% for beat in beat %}

    {% if beat.iframe %}

        <div class="column">

            <div class="columns is-centered is-vcentered has-text-centered" style="background: rgba(0,0,0,0.4); color: white">

                <div class="column">
                    <label for="artist" style="margin: auto"><strong class="">Prod. by : </strong></label>
                    {% if beat.artiste %}
                        {{ beat.artiste }}
                    {% else %}
                        Vinny Vixi
                    {% endif %}
                </div>

                <div class="column">
                    <label for="bpm" style="margin: auto"><strong class="">BPM : </strong></label>
                    {% if beat.bpm %}
                        {{ beat.bpm }}
                    {% else %}
                        N/C
                    {% endif %}
                </div>

                <div class="column">
                    <label for="genre" style="margin: auto"><strong class="">Genre : </strong></label>
                    {% if beat.genre %}
                        {{ beat.genre }}
                    {% else %}
                        N/C
                    {% endif %}
                </div>

            </div>

            <div class="columns is-centered is-vcentered has-text-centered">

                <iframe src="{{ beat.iframe }}" width="100%" height="140" style="border: none;"></iframe>

            </div>

        </div>

    {% endif %}

{% endfor %}


<script>
    let _iframe = document.getElementsByTagName('iframe');

    for (i = 0; i < _iframe.length; i++){
        console.log(_iframe[i].attributes[0].ownerElement);
        let iframe = _iframe[i].attributes[0].ownerElement;
        let nextBeat = _iframe[i+1];
        iframe.onplay = function (){console.log('PLAY OK');};
        iframe.onpause = function (){console.log('PAUSE OK');};
        _iframe[i].onended = function(){
            if(i === _iframe.length){
                nextBeat = _iframe[0];
            }
            nextBeat.play();

        };
    }
</script>