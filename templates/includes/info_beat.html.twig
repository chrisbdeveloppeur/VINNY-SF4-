<label class="columns is-centered">
    <h2 class="column has-text-weight-bold text-uppercase has-text-white bg-info">

        <p class="has-background-black-bis has-icons-left" style="padding: 10px; margin-bottom: 0">

            <span class="icon is-small has-text-info" style="margin:0 10px">
                <i class="fas fa-award"></i>
            </span>

            Original Beats

            <span class="icon is-small has-text-info" style="margin:0 10px">
                <i class="fas fa-award"></i>
            </span>

        </p>

    </h2>

</label>

{% for beat in beat %}


{% if not beat.iframe %}

    <div class="columns is-centered is-vcentered container bg-dark has-text-link" style="margin-bottom: 30px;">

        <div class="is-flex is-centered is-vcentered justify-content-center">
            {% if beat.beatimagename %}
                <img src="{{ vich_uploader_asset(beat, 'beatImage') | imagine_filter('normal_size') }}" alt="Illustration" style="box-shadow: 0px 0px 5px 5px rgba(0,0,0,0.1); margin: 10px 10px 10px 0; background: rgba(255,255,255,0.1)">
            {% else %}
                <img src="{{ asset('build/images/vinny_logo_reducidisimo.e28edbc4.png') | imagine_filter('normal_size') }}" alt="Illustration" style="box-shadow: 0px 0px 5px 5px rgba(0,0,0,0.1); margin: 10px 10px 10px 0; background: rgba(255,255,255,0.1)">
            {% endif %}
        </div>

        <div class="column is-vcentered" >

            <div class="columns is-centered is-vcentered has-text-centered">

                <div class="column is-flex" style="justify-content: center;align-items: center">
                    <div class="">
                        <label for=""><strong class="">Titre : </strong></label>
                        {% if beat.titre %}
                            {{ beat.titre }}
                        {% else %}
                            N/C
                        {% endif %}
                    </div>
                </div>

                <div class="column">
                    <label for=""><strong class="">Prod. by : </strong></label>
                    {% if beat.artiste %}
                        {{ beat.artiste }}
                    {% else %}
                        Vinny Vixi
                    {% endif %}
                </div>

                <div class="column">
                    <label for=""><strong class="">BPM : </strong></label>
                    {% if beat.bpm %}
                        {{ beat.bpm }}
                    {% else %}
                        N/C
                    {% endif %}
                </div>

                <div class="column">
                    <label for=""><strong class="">Genre : </strong></label>
                    {% if beat.genre %}
                        {{ beat.genre }}
                    {% else %}
                        N/C
                    {% endif %}
                </div>
            </div>

            <audio controls preload="metadata" id="player" class="js-player beatFormBeatList" style="width: 100%">
                <source class="audio" src="{{ vich_uploader_asset(beat, 'beatFile') }}" type="audio/mp3" />
            </audio>

        </div>

        <div class="is-flex is-centered is-vcentered justify-content-center">

            <button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bd-example-modal-lg" style="background: rgba(0,0,0,0);box-shadow: none;border: none">
                <img class="open-modal" src="{{ asset('build/images/shop.ea0d13d0.png') | imagine_filter('small_size') }}" alt="Illustration" style="">
            </button>

            <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg modal-dialog-centered">



                    <div class="modal-content" style="border-radius: 0px; border: none;">

                        <div class="modal-header is-centered" style="background: #343a40;border-radius: 0px">
                            <h5 class="modal-title has-text-weight-bold" style="color: #999c9f;">Licences</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color: #999c9f;">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>

                        <div class="modal-body">
                            <div class="pricing-table columns">

                                {% for licence in licence %}
                                    <div class="pricing-plan is-{{ licence.color }} is-full-touch is-1 column" style="padding: 0;border:none;border-radius: 0px">
                                        <div class="plan-header has-background-{{ licence.color }} has-text-white text-uppercase" style="border-radius: 0px">{{ licence.titre }}</div>
                                        <div class="plan-price">

                                            {% if licence.dollar and licence.euro %}
                                                <span class="plan-price-amount"><span class="plan-price-currency">$</span>{{ licence.dollar }}</span>
                                                <span class="is-size-3">/</span>
                                                <span class="plan-price-amount"><span class="plan-price-currency">€</span>{{ licence.euro }}</span>
                                            {% else %}
                                                <span class="plan-price-amount">Tarif à négocier</span>
                                            {% endif %}
                                        </div>

                                        <div class="plan-items is-size-5">

                                            {% if licence.info1 %}
                                                <div class="plan-item">{{ licence.info1 }}</div>
                                            {% else %}
                                                <div class="plan-item">-</div>
                                            {% endif %}

                                            {% if licence.info2 %}
                                                <div class="plan-item">{{ licence.info2 }}</div>
                                            {% else %}
                                                <div class="plan-item">-</div>
                                            {% endif %}

                                            {% if licence.info3 %}
                                                <div class="plan-item">{{ licence.info3 }}</div>
                                            {% else %}
                                                <div class="plan-item">-</div>
                                            {% endif %}

                                            {% if licence.info4 %}
                                                <div class="plan-item">{{ licence.info4 }}</div>
                                            {% else %}
                                                <div class="plan-item">-</div>
                                            {% endif %}

                                        </div>

                                        <div class="plan-footer">
                                            <button class="button is-fullwidth has-text-weight-bold has-text-white" style="border-radius: 0px;">Choisir</button>
                                        </div>
                                    </div>
                                {% endfor %}


                            </div>
                        </div>




                    </div>
                </div>
            </div>

        </div>


    </div>

{% elseif not beat %}

    <div class="alert alert-danger" role="alert">
        <h4 class="alert-heading">Well done!</h4>
        <p>Aww yeah, you successfully read this important alert message. This example text is going to run a bit longer so that you can see how spacing within an alert works with this kind of content.</p>
        <hr>
        <p class="mb-0">Whenever you need to, be sure to use margin utilities to keep things nice and tidy.</p>
    </div>

{% endif %}



{% endfor %}


<script>
    let _audio = document.getElementsByClassName('beatFormBeatList');
    for (i = 0; i < _audio.length; i++){
        let nextBeat = _audio[i+1];
        _audio[i].onended = function(){
            if(i === _audio.length){
                nextBeat = _audio[0];
            }
            nextBeat.play();

        };
    }
</script>